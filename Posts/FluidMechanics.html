  <!-- Global site tag (gtag.js) - Google Analytics -->
<!-- <script async src="https://www.googletagmanager.com/gtag/js?id=UA-125128411-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'UA-125128411-1');
</script> -->




<h1 style="text-align:center; margin-top: 2em; margin-bottom: 1em;">Basic relations of Fluid Mechanics</h1>

A fluid can be treated in two different ways. One can either express all fluid properties in terms of the position $\mathbf{r}$ of the particles in the fluid (Lagrangian, or particle, description), or one can treat the fluid properties as time dependent fields (Eulerian, or field, description). We will mostly use the latter in this text, although some fluid properties are easier to write down in the Lagrangian description. Frequently we will use the velocity field $\mathbf{v}$ of the fluid. This should be understood as the Lagrangian velocity field $d\mathbf{r}/dt$ evaluated at an Eulerian field position $\mathbf{x}$. Let us start by considering a general fluid property $F_L(\mathbf{r}(\mathbf{x},t),t)$ expressed in the particle description and try to find how changes in the corresponding Lagrangian property $F_L(\mathbf{x},t)$ relates to changes in the Eulerian property $F_E$. That is, what is $\partial F_L/\partial t$ in terms of $\mathbf{r}$ and $\mathbf{t}$, provided that $F_E(\mathbf{x},t)=F_L(\mathbf{r}(\mathbf{x},t),t)$?
\[
  \frac{\partial F_L}{\partial t}
  = \frac{\partial F_E}{\partial t}
  + \frac{\partial F_E}{\partial \mathbf{x}} \frac{\partial \mathbf{x}}{\partial \mathbf{r}}
  \frac{\partial \mathbf{r}}{\partial t}.
\]
Here, $\partial \mathbf{x}/\partial \mathbf{r}$ is the matrix transforming a vector expressed in the Lagrangian basis to a vector expressed in the Eulerian basis. Assuming the two reference frames are neither relatively scaled or rotated, this is just the identity matrix. In that case
\[
  \frac{\partial F_L}{\partial t}
  = \frac{\partial F_E}{\partial t}
  + \frac{\partial F_E}{\partial \mathbf{x}} \frac{\partial \mathbf{r}}{\partial t}
  = \left(\frac{\partial }{\partial t} + \mathbf{v}\cdot \nabla\right) F_E.
\]
This is what is sometimes referred to as the <b>Material derivative</b>. Although we will not use this notation a lot, let's give it a name
\[
  \frac{D}{Dt} = \frac{\partial }{\partial t} + \mathbf{v}\cdot \nabla.
\]
To demonstrate the power of sometimes working in the Lagrangian picture, let us consider the relative change
\[
  \frac{1}{\delta V_L} \frac{\partial}{\partial t} \delta V_L
\]
of a tiny, comoving volume $\delta V$. This quantity, by the way, commonly goes under the name of <b>volumetric strain rate</b> or <b>bulk strain rate</b>.
Writing the volume as a tiny box, we have $\delta V_L = \delta r_1 \delta r_2 \delta r_3$, which, by virtue of the product rule, gives
\[
  \frac{1}{\delta V_L} \frac{\partial}{\partial t} \delta V_L
  =
  \frac{1}{\delta r_i}\frac{\partial}{\partial t}\delta r_i
\]
where summation over equal indices should be understood. Since derivatives distributes over sums
\[
  \frac{\partial}{\partial t}\delta r_i
  =
  \delta\left(\frac{\partial r_i}{\partial t}\right)
  = \delta v_i
\]
so that the volumetric strain rate takes the form
\[
  \frac{1}{\delta V_L} \frac{\partial}{\partial t} \delta V_L
  = \frac{\delta v_i}{\delta r_i}
  = \frac{\delta v_i}{\delta x_i}
\]
where we have used that $\delta r_i = \delta x_i$, or equivalently, $\delta V_L = \delta V_E$, when no changes in time are considered. Taking the limit $\delta V_L \rightarrow 0$, the ratio of change turns into the definition of the derivative. Hence
\[
  \lim_{\delta V_L \rightarrow 0}\frac{1}{\delta V_L} \frac{\partial}{\partial t} \delta V_L
  =
  \frac{\partial v_i}{\partial x_i}
  = \nabla \cdot \mathbf{v}.
\]
Now let us move on to the most important relations in physics: Conservation laws.


<h2 style="text-align:center; margin-top: 2em; margin-bottom: 1em;">Conservation of Mass</h2>

We are actually very close to having an expression for the conservation of mass already. Considering a tiny amount of comoving mass $\delta M_L$, conservation of mass then states
\[
  \frac{1}{\delta M_L} \frac{\partial}{\partial t} \delta M_L = 0.
\]
Now, we can write the mass $\delta M_L$ in terms of the density $\rho_L$ and a tiny volume $\delta V_L$ and let $\delta V_L \rightarrow 0$ to find that
\[
  \frac{1}{\delta M_L} \frac{\partial}{\partial t} \delta M_L
  =
  \frac{1}{\rho} \frac{\partial}{\partial t} \rho_L
  +
  \frac{1}{\delta V_L} \frac{\partial }{\partial t}\delta V_L
  =
  \frac{1}{\rho} \left(\frac{\partial \rho}{\partial t} + \mathbf{v}\cdot \nabla \rho \right)
  +
  \nabla \cdot \mathbf{v}
\]
by virtue of our expression for the volumetric strain rate. Conservation of mass can thus be expressed as
\[
  \frac{\partial \rho}{\partial t} + \mathbf{v}\cdot \nabla \rho
  +
  \rho \nabla \cdot \mathbf{v} = 0,
\]
or, if you like,
\[
  \frac{\partial \rho}{\partial t} + \nabla \cdot \rho \mathbf{v} = 0.
\]
To make sure we are right, let us discover this equation with a different approach as well.
<p/>
The produced mass $dM/dt$ inside any comoving volume $V$ must either be a change in density $\rho$, a deformation of volume. That is
\[
  \frac{dM}{dt}
  =
  \frac{d}{dt} \int_V \rho dV
  = \int_V \frac{\partial}{\partial t} \rho dV + \int_{\partial V} \rho \left(\mathbf{v} \cdot d\mathbf{S}\right),
\]
where $\partial V$ is the boundary of $V$ and $d\mathbf{S}=\mathbf{n}dS$, where $\mathbf{n}$ is a unit vector pointing out of $\partial V$. If you are more mathematically minded, you may think of this as a generalization of the one-dimensional <i>Leibniz rule</i>
\[
  \frac{d}{dt} \int_a^b F(x,t) dx
  = \int_a^b \frac{\partial}{\partial t}F(x,t) dx + \frac{\partial b}{\partial t} F(b,t) - \frac{\partial a}{\partial t} F(a,t).
\]
Strictly speaking, the velocity $\mathbf{v}$ is therefore not the Langrangian fluid velocity, but the velocity of the boundary of the volume $V$. Since the volume is assumed to be comoving, however, these two are the same. We could, in fact, reinterpret the whole thing. A very similar statement also holds true for a fixed volume in the Eulerian formalism. Since the volume is fixed, the time derivative can be taken as a partial derivative inside the volume integral. The surface term then becomes the flux of mass through the boundary of the volume. Accounting for the mass inside the fixed volume, under the assumption that mass is conserved, thus becomes
\[
  \frac{dM}{dt} = \frac{d}{dt} \int_V \rho dV
  = -\int_{\partial V} \rho \left(\mathbf{v} \cdot d\mathbf{S}\right)
\]
and not
\[
  \frac{dM}{dt}
  =
  \int_V \frac{\partial \rho}{\partial t} dV + \int_{\partial V} \rho \left(\mathbf{v} \cdot d\mathbf{S}\right) = 0,
\]
as in our original interpretation. Forgetting about the $dM/dt$ term, these are obviously the same statement.

Now, invoking the Divergence theorem we can make the two integrals be over the same domain
\[
  \int_V \left( \frac{\partial \rho}{\partial t} + \nabla \cdot \rho \mathbf{v} \right) dV = 0.
\]
Since this should hold for any choice of volume $V$, evaluation to zero must be due to the vanishing of the integrand. Hence we recover the same expression as before:
\[
  \frac{\partial \rho}{\partial t} + \nabla \cdot \rho \mathbf{v}  = 0.
\]
This equation is sometimes referred to as the <b>Continuity equation</b>. Note, however, that the volume $V$ may enclose a sink, or a source, in which case the change in mass inside the volume does not correspond to the flux out of the volume. In that case, there will be an additional source-term contributing to the change in mass.


<h2 style="text-align:center; margin-top: 2em; margin-bottom: 1em;">Equations of Motion</h2>

On point-like objects, the classical equations of motion are determined by Newtons second law, $\mathbf{F}=\frac{d}{dt}m\mathbf{v}$. For fluids, we should consider a control volume $V$. Let this volume be comoving with the fluid (Lagrangian desciption). There are two ways to change the momentum $m\mathbf{v}$ inside a volume $V$. There can both be a change in internal momentum, or an increase in momentum due to deformation of the boundary of the volume
\[
  \frac{d}{dt} \int_{V} \rho \mathbf{v} dV
  =
  \int_{V} \frac{\partial}{\partial t}\rho \mathbf{v} dV
  +
  \int_{\partial V} \rho \mathbf{v} (\mathbf{v} \cdot d\mathbf{S}).
\]
Invoking the Divergence theorem, as before, the change in momentum can be written in the form
\[
  \int_{V}  \frac{\partial}{\partial t}\rho \mathbf{v} dV + \int_V \left(\nabla \cdot \rho \mathbf{v}\mathbf{v}\right)dV.
\]
where $\mathbf{v}\mathbf{v}$ is a dyadic product. To write it in a more suggestive form, we may use the product rule
\[
  \nabla \cdot \rho \mathbf{v}\mathbf{v}
  =
  \frac{\partial}{\partial x_i} \rho v_i \mathbf{v}
  =
  \rho v_i \frac{\partial}{\partial x_i} \mathbf{v}
  +
  \mathbf{v} \frac{\partial}{\partial x_i} \rho v_i
  =
  \rho \mathbf{v} \cdot \nabla \mathbf{v}
  +
  \mathbf{v} \nabla \cdot \rho \mathbf{v}
\]
leaving us with
\[
  \frac{d}{dt} \int_{V} \rho \mathbf{v} dV
  =
  \int_V \left(
    \frac{\partial}{\partial t}\rho \mathbf{v}
    + \mathbf{v} \nabla \cdot \rho \mathbf{v}
    + \rho \mathbf{v} \nabla \cdot \mathbf{v}
  \right ) dV
\]
Now, according to Newton, this should correspond to the net force $\mathbf{F}$ acting on the fixed control volume. Our next problem is therefore to figure out a nice way to express the forces involved. First, let us divide the possible forces into two groups: Those acting on the surface of the volume ($\partial V$), and those acting on the bulk ($V$)
\[
  \mathbf{F} =
  \int_V \frac{\partial \mathbf{F}_v}{\partial V} dV
  +
  \int_{\partial V} \frac{\partial \mathbf{F}_s}{\partial S} dS.
\]
Let us hereby write $\mathbf{f}$ for the force density $\partial \mathbf{F}_s/\partial V$ acting on the bulk. Notice that the force per surface element $\mathbf{T}=\partial \mathbf{F}_s/\partial S$ should generally depend on the direction $\mathbf{n}$ normal to the surface. Since this may quickly become ugly let us assume, which is reasonable, that the surface force $\mathbf{T}$ is well described by its local linearization. That is
\[
  \mathbf{T}(\mathbf{n}) \simeq \mathbf{T}_0 + \tau \mathbf{n},
\]
where $\mathbf{T}_0$ is a constant vector and $\tau$ the Jacobian matrix of $\mathbf{T}$. This means that for a given point $\mathbf{x}$, the surface force $\mathbf{T}$ at $\mathbf{x}$ should be the same for every smooth surface that has normal vector $\mathbf{n}$ at $\mathbf{x}$. Our assumption means, therefore, that $\mathbf{T}$ does not depend on other things than $\mathbf{n}$, like, for instance, the local curvature at $\mathbf{x}$. By Newtons third law, the force exerted on the surface should be the same as the force the surface exerts on the surroundings, so that $-\mathbf{T}(\mathbf{n})=\mathbf{T}(-\mathbf{n})$. From this, it follows that $\mathbf{T}_0=0$. The moral of the story is this: For each point $\mathbf{x}$ on the surface, the local linearization of the surface force $\mathbf{T}$ can be expressed as $\mathbf{T}=\tau \mathbf{n}$, where $\tau$ is independent of the normal vector $\mathbf{n}$. Now, let us use index notation to ease the manipulation to come. This means that $\tau \mathbf{n} = \tau_{ij} n_j \mathbf{e}_{(i)}$, where summation over equal indices are understood, and $\mathbf{e}_{(i)}$ is the unit basis vector in the $i$'th direction. From the Divergence theorem we then find
\[
  \int_{\partial V} \frac{\partial \mathbf{F}_s}{\partial S} dS
  =
  \int_{\partial V} \tau_{ij} n_{j} \mathbf{e}_{(i)}dS
  =
  \int_{V} \frac{\partial \tau_{ij}}{\partial x_j}\mathbf{e}_{(i)}dV.
\]
This means that the equation of motion becomes
\[
  \int_V \left(
    \frac{\partial}{\partial t}\rho \mathbf{v}
    + \rho \mathbf{v} \cdot \nabla \mathbf{v}
    + \mathbf{v} \nabla \cdot \rho \mathbf{v}
  \right ) dV
  =
  \int_V \left(
    \mathbf{f}
    +\frac{\partial \tau_{ij}}{\partial x_j}\mathbf{e}_{(i)}
  \right ) dV
\]
and, as before, since this must hold for any volume $V$, the integrand must vanish independent of $V$
\[
\frac{\partial}{\partial t}\rho \mathbf{v}
+ \rho \mathbf{v} \cdot \nabla \mathbf{v}
+ \mathbf{v} \nabla \cdot \rho \mathbf{v}
=
\mathbf{f}
+\frac{\partial \tau_{ij}}{\partial x_j}\mathbf{e}_{(i)}.
\]
In fact, we may factor out the expression which vanishes according to conservation of mass
\begin{align}
  & \frac{\partial}{\partial t}\rho \mathbf{v}
  + \rho \mathbf{v} \cdot \nabla \mathbf{v}
  + \mathbf{v} \nabla \cdot \rho \mathbf{v} \\
  & =
  \rho\frac{\partial}{\partial t} \mathbf{v}
  + \rho \mathbf{v} \cdot \nabla \mathbf{v}
  + \mathbf{v} \underbrace{ \left( \frac{\partial}{\partial t}\rho + \nabla \cdot \rho \mathbf{v} \right) }_{\text{Conservation of mass}} \\
  & =
  \rho\frac{\partial}{\partial t} \mathbf{v}
  + \rho \mathbf{v} \cdot \nabla \mathbf{v}.
\end{align}
Hence, our final expression for the equations of motion is
\[
  \rho\frac{\partial v_i}{\partial t}
  + \rho v_j \frac{\partial v_i}{\partial x_j}
  =
  f_i
  +\frac{\partial \tau_{ij}}{\partial x_j},
\]
or, if you prefer,
\[
  \rho \frac{D \mathbf{v}}{Dt} =
  \mathbf{f}+\frac{\partial \tau_{ij}}{\partial x_j}\mathbf{e}_{(i)}.
\]
These are the so-called <b>Cauchy equations</b>. Before starting to understand and simplify equation, we should spend some words on what just happened. We have derived the equations of motion valid for any comoving chunk of a fluid. Notice that we could also have considered the change in momentum thorugh a fixed control volume $V$. The interpretation of the equation
\[
  \mathbf{F} = \frac{d}{dt}\int_V \rho \mathbf{v} dV + \int_{\partial V} \rho \mathbf{v}(\mathbf{v}\cdot d\mathbf{S})
\]
then becomes that $\mathbf{F}$ is the net force acting on the fixed volume, the first integral term is the internal change in momentum, and the last integral term is the transport of momentum out of the volume. This is a statement that is very practical for engineers. Suppose, for instance, that you are building a pole in the middle of a steadily flowing river. You will be interested in how much force the flow exerts on the pole. Since the flow is steady, there is no internal momentum change. This is, of course, assuming the absense of forces acting on the bulk. If you imagine a large volume enclosing the flow around the pole, but not the pole itself, the momentum flux out of the boundary must therefore equal the drag force on the pole.
<p/>
Generally, in the absence of forces on the bulk, $\partial \mathbf{F}_v/\partial V=0$, then, assuming steady flow ($\partial (\rho\mathbf{v})/\partial t=0$) makes integrated Cauchy equations take the following form
\[
  \int_{\partial V} \left(\rho \mathbf{v}\mathbf{v}-\frac{\partial \mathbf{F}_s}{\partial S}\right) \cdot d\mathbf{S} = 0.
\]
Let us now consider an object in the fluid enclosed by the volume $V$. Let us simply exclude the object from the volume, such that we have an outer boundary area $A_{out}$ and an inner boundary area $A_{obj}$ separating the fluid from the object. Now, since the fluid velocity at $A_{obj}$ is perpendicular to $A_{obj}$, the force exerted on the body by the fluid is
\[
  \mathbf{F} = -\int_{A_{obj}} \frac{\partial \mathbf{F}_s}{\partial S} \cdot d\mathbf{S}.
\]
On the other hand, we know that
\[
  \int_{A_{obj}} \frac{\partial \mathbf{F}_s}{\partial S} \cdot d\mathbf{S}
  =
  \int_{A_{out}} \left(\rho \mathbf{v}\mathbf{v}-\frac{\partial \mathbf{F}_s}{\partial S}\right) \cdot d\mathbf{S}
\]
meaning that we may find the force $\mathbf{F}$ the fluid exerts on the object by computing
\[
  \mathbf{F} = -\int_{A_{out}} \left(\rho \mathbf{v}\mathbf{v}-\frac{\partial \mathbf{F}_s}{\partial S}\right) \cdot d\mathbf{S}
\]
for some possibly distant surface $A_{out}$ that encapsulates both the object and the fluid.
<p/>



<h2 style="text-align:center; margin-top: 2em; margin-bottom: 1em;">Stress and Newtonian fluids</h2>

A fluid at rest cannot have off-diagonal terms in the surface, or stress, force $\tau_{ij}$. Actually, this can be taken as the definition of a fluid: A substance that deformes under any form of shear stress. Shear stress being exactly the off-diagonal terms in $\tau_{ij}$. Moreover, if there are only diagonal terms in $\tau_{ij}$, the force will always be parallel to the surface. This is a force we know from before. It is the force due to a thermodynamic pressure $p$. If we assume the pressure not to depend on the orientation of the surface,  we can safely say that, for a static fluid,
\[
  \tau_{ij} = -p\delta_{ij}.
\]
If the fluid is moving, we can still pull out this term, although it should be noted that pressure is not well defined unless the fluid can be treated as if in equilibrium. Hence, for a moving fluid
\[
  \tau_{ij} = -p\delta_{ij} + \sigma_{ij},
\]
where $\sigma$ is called the <b>deviatoric stress tensor</b>. Note that by construction, $\sigma_{ij}=0$ if the fluid is at rest. Actually, "at rest" is a problematic statement in physics as different inertial reference frames should agree on the behaviour of physical systems, but they will not agree on whether some chunk is "at rest". What this force should describe, however, is how the fluid responds to deformations. That is, the force must depend on local variations in fluid velocity. It should therefore be zero if the velocity gradients $\partial v_i/\partial x_j$ are. Let us, for simplicity, assume they are linearly related
\[
  \sigma_{ij} = C_{ijkl}\frac{\partial v_k}{\partial x_l}
\]
where $C_{ijkl}$ are some coefficients independent of the velocity components of the fluid. Fluids that satisfy this linearity are called <b>Newtonian fluids</b>. Note that while it is safe to treat most fluids as Newtonian, there are many exceptions ranging from <i>Silly Putty</i> to <i>wettened corn starch</i> and <i>Ketchup</i>. Let us postpone ketchup-dynamics to some later text, and move on with Newtonian fluids.

<p/>

The anti-symmetric part
\[
    \frac{1}{2}\left( \frac{\partial v_i}{\partial x_j} - \frac{\partial v_j}{\partial x_i} \right)
\]
of the velocity gradients correspond to rotations, and not deformations. This can be seen from realizing that the force $\sigma_{ij}n_{j}$ of an anti-symmetric stress-tensor $\sigma_{ij}$ must be orthogonal to the normal vector $\mathbf{n}$ of the surface. Assuming rotational equilibrium, we can therefore discard the anti-symmetric part. If we further assume the material to be isotropic, we are left with only two degrees of freedom in the coefficients $C_{ijkl}$:
\[
   C_{ijkl}
   = \lambda \delta_{ij}\delta_{kl}
   + \mu \left( \delta_{ik}\delta_{jl}+\delta_{il}\delta_{jk} \right)
\]
where we refer to $\mu$ as the <b>dynamic stress viscosity</b>. This means that the deviatoric stress tensor takes the form
\[
  \sigma_{ij}
  = \lambda \delta_{ij}\delta_{kl}\frac{\partial v_k}{\partial x_l}
  + \mu \left( \delta_{ik}\delta_{jl}+\delta_{il}\delta_{jk} \right)\frac{\partial v_k}{\partial x_l}
  =
  \lambda \delta_{ij} \nabla \cdot \mathbf{v}
  +
  \mu \left( \frac{\partial v_i}{\partial x_j} + \frac{\partial v_j}{\partial x_i} \right)
\]
The symmetric part of the gradient velocities,
\[
  e_{ij} = \frac{1}{2}\left(  \frac{\partial v_i}{\partial x_j} + \frac{\partial v_j}{\partial x_i} \right),
\]
is, by the way, often referred to as the <b>Strain rate tensor</b> $e_{ij}$. Hence, the total stress on an isotropic, newtonian fluid can be written
\[
\tau_{ij} = -p \delta_{ij} + \lambda \delta_{ij}\nabla \cdot \mathbf{v} + 2 \mu e_{ij}.
\]
Here, we can recognize $\lambda$ as the coefficient determining the strength of the surface force resulting from a volumetric strain rate $\nabla \cdot \mathbf{v}$. Let us try to understand more about these quantities by computing the trace $\tau_{ii}$ of the stress:
\[
  \tau_{ii}
  = -p \delta_{ii} + \lambda \delta_{ii}\nabla \cdot \mathbf{v} + 2 \mu e_{ii}
  = -3p + \left(3\lambda + 2 \mu \right)\nabla \cdot \mathbf{v}.
\]
This seems to be one of those wierd thermodynamic situations. One the one hand, we have a mechanical pressure $\overline{p}\equiv -\tau_{ii}/3$, and on the other, a thermodynamic pressure $p$. Their difference being related to the volumetric strain rate through
\[
  p - \overline{p} = \left(\frac{2}{3}\mu+\lambda\right) \nabla \cdot \mathbf{v}.
\]
That the two pressures happen to be different are often interpreted as follows. If the fluid is locally expanding or contracting, there will be a delay in reaching thermal equilibrium which makes the thermodynamic pressure lag behind the mechanical pressure. A common, but much discussed, simplification is to assume the factor $2\mu/3+\lambda$, also referred to as the <i>coefficient of bulk viscosity</i>, to vanish. This, which amounts to fixing the $\lambda$ to the value $\lambda = -2\mu/3$, is referred to as <i>Stokes' assumption</i>.

<p/>

Assuming the validity of Stokes assumption we may express the equation of motion for a Newtonian fluid as follows
\[
  \rho\frac{\partial v_i}{\partial t}
  + \rho v_j \frac{\partial v_i}{\partial x_j}
  =
  f_i
  +\frac{\partial}{\partial x_j}
  \left(
    2\mu e_{ij} - p\delta_{ij} - \frac{2}{3}\mu \delta_{ij} \nabla \cdot \mathbf{v}
  \right)
\]
which reduces to
\[
  \rho\frac{\partial v_i}{\partial t}
  + \rho v_j \frac{\partial v_i}{\partial x_j}
  =
  f_i
  -\nabla p
  - \frac{2}{3} \frac{\partial}{\partial x_i}\mu \nabla \cdot \mathbf{v}
  +2\frac{\partial e_{ij}}{\partial x_j}.
\]
This is a general form of the famous <b>Navier-Stokes equation</b>. Note that if all viscous effects are negligible, then the Navier-Stokes equation takes the form
\[
  \rho \frac{D\mathbf{v}}{Dt} = -\nabla p + \mathbf{f}
\]
which is referred to as the <b>Euler Equation</b>. It does not suffice to assume the fluid to be incompressible ($\nabla \cdot \mathbf{v}=0$) as one would be left with the viscous term $\mu \nabla^2 \mathbf{v}$ in the Navier-Stokes equation.


<h2 style="text-align:center; margin-top: 2em; margin-bottom: 1em;">Streamlines and Potential flows</h2>

For any fluid, we may visualize its flow by drawing lines that indicate the global trajectory of the fluid. For a flow whose velocity field $\mathbf{v}$ is changing in time, there are several ways to do this. We can, for instance, either draw the line resulting an imaginary particle drifting in the fluid always inheriting the fluids velocity. This would make a so-called <i>Pathline</i>. We could also freeze each point in time and consider a particle drifting in this steady flow. In other words, a curve that is tangent to the flow at every point. The nice thing with this concept, called a <i>Streamline</i>, is that a tube of such lines can never be crossed by the flow. If the flow is steady, then pathlines and streamlines are the same, their defining equation being
\[
  \frac{d\mathbf{x}}{d\lambda} \times \mathbf{v}(\mathbf{x}(\lambda)) = 0,
\]
where $\lambda$ parameterizes the points $\mathbf{x}(\lambda)$ making up the streamline. In fact, if we recall the continuity equation
\[
  \frac{\partial \rho}{\partial t} + \nabla \cdot \rho \mathbf{v} = 0,
\]
we see that for a steady flow ($\partial_t \rho = 0$) it simply claims the momentum density field $\rho \mathbf{v}$ to be divergence-less. Since the divergence of the curl of any vector field is zero $\nabla \cdot (\nabla \times \mathbf{A})$, this means we may construct a vector field $\mathbf{\Omega}$ satisfying
\[
  \rho \mathbf{v} = \nabla \times \mathbf{\Omega}.
\]
For a 2D flow in the $xy$-plane we may introduce a scalar function $\psi$ so that $\mathbf{\Omega}=-z \nabla\psi$ and since the curl of any gradient vanishes,
\[
  \rho \mathbf{v}
    = \nabla \times (-z \nabla\psi)
    = -\mathbf{k} \times \nabla \psi,
\]
or, if you prefer,
\[
  \rho \mathbf{v}
  = \nabla \times \psi \mathbf{k}.
\]
Here, the function $\psi$ is referred to as the <b>Streamfunction</b>. Notice that if the density of the fluid can be regarded as constant, i.e. $\nabla \rho =0$. Then the above relations holds for $\mathbf{v}$ rather than $\rho \mathbf{v}$. For a steady flow, a constant density is, by virtue of the continuity equation, the same as demanding the fluid to be incompressible ($\nabla \cdot \mathbf{v}$).

<p/>

In cases where the flow can be assumed to be irrotational, i.e. $\nabla \times \mathbf{v}=0$, we can do a similar analysis to the one above. Since the curl of any gradient is zero, we can construct a scalar function $\varphi$ such that $\nabla \times \mathbf{v}=0$ follows trivially from $\mathbf{v}=\nabla \varphi$. Moreover, if we assume the flow to be incompressible, i.e. $\nabla \times \mathbf{v}=0$, then the velocity field is, together with the appropriate boundary conditions, defined by the Laplace equation $\nabla^2 \varphi = 0$. A natural way to conclude this text is therefore to display a realtime simulation of such a flow as it moves around a circular cylinder:

<p/>

<div id="p5jsAnim"></div>
<script>
var U = 5.0;
var R = 50;
var t = 0;
var W,H;
var PARTICLES = [];
var play = false;
function setup(){
  var cnt = select("#p5jsAnim") // pick canvas holder
  W = cnt.width;
  H = 300;
  canvas = createCanvas(W,H); // set width to canvas holder
  canvas.parent("p5jsAnim"); // put canvas in canvas holder
  for(var n=0; n<1000; n++){
    var x = random(-W/2,W/2);
    var y = random(-H/2,H/2);
    if(sq(x)+sq(y)>sq(R)){
      PARTICLES.push( new Particle(x,y) )
    }
  }
  textAlign(CENTER);
  noLoop();
}

function draw(){
  background(247,248,249,10)
  translate(W/2,H/2);
  if(play){
    noStroke();
    fill(38,47,58)
    ellipse(0,0,2*R,2*R)
    for(var i=0; i<PARTICLES.length; i++){
      PARTICLES[i].move(0.1)
      PARTICLES[i].display()
    }
  }else{
    stroke(0)
    fill(0)
    text("PRESS TO START ANIMATION",0,0)
  }
}

function Particle(x,y){
  this.x = x;
  this.y = y;
  this.move = function(dt){
    var th = atan2(this.x,this.y)
    var r = sqrt(sq(this.x)+sq(this.y))
    var rx = this.x/r
    var ry = this.y/r
    var tx = ry
    var ty = -rx
    var vr =  U*(1-sq(R/r))*cos(th+PI/2)
    var vt = -U*(1+sq(R/r))*sin(th+PI/2)
    var vx = vr*rx + vt*tx
    var vy = vr*ry + vt*ty
    this.x += vx*dt
    this.y += vy*dt
    if(this.x<-W/2){this.x=W/2;}
  }
  this.display = function(){
    stroke(93,179,255)
    fill(93,179,255)
    ellipse(this.x,this.y,2,2)
  }
}
function mousePressed(){
  loop();
  play = !play
}
</script>

<p/>
<p/>








  <div id="disqus_thread"></div>
    <script>
    var disqus_config = function () {
    this.page.url = "https://augustge.github.io/#!/FluidMechanics";  // Replace PAGE_URL with your page's canonical URL variable
    this.page.identifier = "Fluid Mechanics"; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
    };
    (function() { // DON'T EDIT BELOW THIS LINE
    var d = document, s = d.createElement('script');
    s.src = 'https://augustg.disqus.com/embed.js';
    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
    })();
    </script>
  <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
